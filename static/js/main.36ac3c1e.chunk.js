(this.webpackJsonpprivacy=this.webpackJsonpprivacy||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),i=n.n(c),s=(n(74),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))}),u=(n(75),n(134)),o=n(16),l=n(137),j=n(140),b=n(4),h=function(e){var t=e.onSetEmail,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=a[0],i=a[1];return Object(b.jsxs)("form",{style:{display:"flex",gap:"4px"},onSubmit:function(e){e.preventDefault(),t(c)},children:[Object(b.jsx)(l.a,{id:"email",label:"Email",type:"email",value:c,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",children:"Confirm"})]})},p=Object(r.createContext)([]),d=n(133),m=n(131),x=n(132),f=n(29),O=function(){return Object(b.jsx)(m.a,{position:"static",children:Object(b.jsxs)(x.a,{children:[Object(b.jsx)(j.a,{color:"inherit",component:f.b,to:"/track-me",children:"Track me"}),Object(b.jsx)(j.a,{color:"inherit",component:f.b,to:"/inquiry",children:"Inquire"}),Object(b.jsx)(j.a,{color:"inherit",component:f.b,to:"/delete-me",children:"Delete me"})]})})},v=function(e){var t=e.children;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,{}),Object(b.jsx)(d.a,{children:t})]})};function y(){var e=Object(r.useContext)(p);return Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{variant:"h2",gutterBottom:!0,children:"Data collection"}),Object(b.jsx)(h,{onSetEmail:function(t){e.forEach((function(e){return e.trackEmail(t)}))}})]})}var g=n(12),k=n(139),w=n(135),S=n(136),C=n(15),E=n.n(C),D=n(11),_=n(45),q=n(24);var B=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=function(e){var t=Object(r.useContext)(p),n=Object(r.useState)({}),a=Object(o.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){null!==e&&t.map(function(){var t=Object(q.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.fetchDetails(e);case 2:r=t.sent,i((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(D.a)({},n.name,{name:n.name,data:r}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,t]),Object.values(c)}(n);return Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{variant:"h2",gutterBottom:!0,children:"Inquiries"}),Object(b.jsx)(h,{onSetEmail:a}),Object(b.jsx)(k.a,{m:1,style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:c.map((function(e){return Object(b.jsx)(w.a,{style:{maxWidth:"600px"},children:Object(b.jsxs)(S.a,{children:[Object(b.jsx)(u.a,{variant:"h3",gutterBottom:!0,children:e.name}),null===e.data?Object(b.jsx)(u.a,{variant:"body1",children:"No data"}):Object(b.jsx)("pre",{children:JSON.stringify(e.data,null,2)})]})},e.name)}))})]})},F=function(){var e=Object(r.useContext)(p),t=Object(r.useState)(!1),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{variant:"h2",gutterBottom:!0,children:"Inquiries"}),Object(b.jsx)(h,{onSetEmail:function(t){function n(){return(n=Object(q.a)(E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,Promise.all(e.map(function(){var e=Object(q.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.deleteMe(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:c(!1);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}}),a&&"Submitting, please wait"]})};function I(){return Object(b.jsxs)(g.d,{children:[Object(b.jsx)(g.b,{path:"/track-me",children:Object(b.jsx)(y,{})}),Object(b.jsx)(g.b,{path:"/inquiry",children:Object(b.jsx)(B,{})}),Object(b.jsx)(g.b,{path:"/delete-me",children:Object(b.jsx)(F,{})}),Object(b.jsx)(g.a,{to:"/track-me"})]})}var M=n(40),P=n(27),J=n(60),L=n.n(J),T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(M.a)(this,e),this.name="MailChimp",this.instance=void 0;var r=/-(.+)$/g,a=r.exec(t)[1];this.instance=L.a.create({baseURL:"".concat(n,"https://").concat(a,".api.mailchimp.com/3.0"),timeout:5e3,auth:{username:"anystring",password:t}})}return Object(P.a)(e,[{key:"fetchDetails",value:function(){var e=Object(q.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.get("/search-members?query=".concat(t));case 2:if(n=e.sent,void 0!==(r=n.data.exact_matches.members[0])){e.next=6;break}return e.abrupt("return",null);case 6:return delete r._links,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"trackEmail",value:function(){var e=Object(q.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.get("/lists");case 2:return n=e.sent,r=n.data.lists[0].id,e.next=6,this.instance.post("/lists/".concat(r),{members:[{email_address:t,status:"subscribed"}],update_existing:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteMe",value:function(){var e=Object(q.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchDetails(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return r=n.list_id,a=n.id,e.next=8,this.instance.post("/lists/".concat(r,"/members/").concat(a,"/actions/delete-permanent"),{members:[{email_address:t,status:"unsubscribed"}],update_existing:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function N(){return Object(b.jsx)(p.Provider,{value:[new T("3cb39dfe34ea91eb93e6c2ededad6ce8-us8","https://startup-cto-cors-proxy.herokuapp.com/")],children:Object(b.jsx)(f.a,{children:Object(b.jsx)(I,{})})})}i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),s()},74:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.36ac3c1e.chunk.js.map